{% extends "base.html" %}
{% load humanize %}
{% load sanitizer %}
{% load taglinks %}

{% block title %}
Brutaldon - {{ timeline }} timelime
{% endblock %}

{% block content %}

<div class="card">
    {% if not fullbrutalism %}
        <div class="card-header" style="background-image: url({{ user.header }});">
    {% else %}
        <div class="card-header">
    {% endif %}
            <div class="card-header-title title">
                <a href="{{ user.url }}">
                    {{ user.display_name }}
                </a>
            </div>
            <figure class="image is-96x96 card-header-icon">
                <img src="{{ user.avatar }}" alt="Avatar">
                {% if user.locked %}
                    <span class="fa fa-lock account-locked">
                        <span class="is-hidden">Private</span>
                    </span>
                {% endif %}
            </figure>
        </div>
        <div class="card-content">
            <div class="content">
                {{ user.note | relink_toot | strip_html | safe }}
            </div>
            <div class="level">
                <div class="level-left">
                    {% if relationship.requested %}
                        <a class="level-item fa fa-hourglass" title="cancel request"
                           href="{% url 'follow' user.id %}">
                            <span class="is-hidden">Cancel request</span>
                        </a>
                    {% elif not relationship.following %}
                        <a class="level-item fa fa-user-plus" title="follow"
                           href="{% url 'follow' user.id %}">
                            <span class="is-hidden">Follow</span>
                        </a>
                    {% else %}
                        <a class="level-item fa fa-user-times" title="unfollow"
                           href="{% url 'follow' user.id %}">
                            <span class="is-hidden">Unfollow</span>
                        </a>
                    {% endif %}
                    <a class="level-item fa fa-social-home"
                       href="{{ user.url }}" title="home">
                        <span class="is-hidden">View on home site</span>
                    </a>
                    <a class="level-item fa fa-envelope"
                       href="{% url 'toot' user.acct %}" title="mention">
                        <span class="is-hidden">Mention</span>
                    </a>
                </div>
                <div class="level-right">
                    {% if not relationship.muting %}
                        <a class="level-item fa fa-volume-off" title="mute"
                           href="{% url 'mute' user.id %}">
                            <span class="is-hidden">Mute</span>
                        </a>
                    {% else %}
                        <a class="level-item fa fa-volume-up" title="unmute"
                           href="{% url 'mute' user.id %}">
                            <span class="is-hidden">Unmute</span>
                        </a>
                    {% endif %}
                    {% if not relationship.blocking %}
                        <a class="level-item fa fa-ban" title="block"
                           href="{% url 'block' user.id %}">
                            <span class="is-hidden">Block</span>
                        </a>
                    {% else %}
                        <a class="level-item fa fa-circle-o" title="unblock"
                           href="{% url 'block' user.id %}">
                                <span class="is-hidden">Unblock</span>
                            </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <br>

    {% for toot in toots %}
    {% if toot.reblog %}
    {% include "main/toot_partial.html" with toot=toot.reblog reblog=True reblog_by=toot.account.acct reblog_icon=toot.account.avatar %}
    {% else %}
    {% include "main/toot_partial.html" with toot=toot reblog=False %}
    {% endif %}
    <hr class="is-hidden">
    {% endfor %}

    {% endblock %}
